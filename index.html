<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <title>Airbnb Narrative Visualization</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-annotation/2.5.1/d3-annotation.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    <script src="main.js" defer></script>
</head>
<body>
    <div id="navigation">
        <button id="homeButton">Home</button>
        <button id="mapButton">Geo Distribution of Listings</button>
        <button id="topStatesButton">States Average Price of Listings</button>
        <button id="priceReviewsButton">Price vs Reviews</button>
        <button id="roomTypeButton">Breakdown by Room Type</button>
        <button id="annualPerformanceButton">Annual Performance Analysis</button>
        <button id="priceDistributionButton">Price Distribution</button> 
    </div>
    <div id="content">
        <div id="scene1" class="scene">
            <h1>Airbnb Listing Analysis and Trends</h1>
            <p>Welcome to our Airbnb data analysis and Trends page. In this interactive exploration, you will learn about Airbnb listings in the United States and uncover interesting patterns and insights. Use the navigation buttons placed on top of the page to move between different scenes.</p>
        </div>
        <div id="scene2" class="scene">
            <div id="scene2-graph"></div>
             <p>Explore the geographic distribution of Airbnb listings around the US. Notice the high concentration of hosts in states like California and New York.</p>
        </div>
        <div id="scene3" class="scene">
            <div id="scene3-graph"></div>
            <p>Discover how the average price of Airbnb listings varies by state. You might find it interesting that states like Connecticut, Hawaii, and California have higher average prices across the US.</p>
        </div>
        <div id="scene4" class="scene">
            <div id="scene4-graph"></div>
            <p>Discover how listing prices relate to the number of reviews they receive. This could provide information about how price affects a listing's popularity among guests.</p>
        </div>
        <div id="scene5" class="scene">
            <div id="scene5-graph"></div>
            <p>Learn about the distribution of listings by room types. Notably, the majority of listings are of "entire home/apt" type, followed by "private room".</p>
        </div>
        <div id="scene6" class="scene">
            <div id="scene6-graph"></div>
            <p>Discover how the number of hosts and listings is trending over time. It's clear that each of these factors has been evidently increasing, indicating the success of Airbnb.</p>
        </div>
        <div id="scene7" class="scene">
            <div id="scene7-graph"></div>
            <p>Get a sense of how listing prices are distributed state-wise. This can give you an idea of the range of prices guests can expect when making an Airbnb reservation.</p>
        </div>
    </div>
    <div id="tooltip" class="tooltip"></div>

    <script>
        const scenes = ["scene1", "scene2", "scene3", "scene4", "scene5", "scene6", "scene7"];

        // Get references to the buttons
        const homeButton = document.getElementById("homeButton");
        const mapButton = document.getElementById("mapButton");
        const topStatesButton = document.getElementById("topStatesButton");
        const priceReviewsButton = document.getElementById("priceReviewsButton");
        const roomTypeButton = document.getElementById("roomTypeButton");
        const annualPerformanceButton = document.getElementById("annualPerformanceButton");
        const priceDistributionButton = document.getElementById("priceDistributionButton");

        // Add click event listeners to buttons
        homeButton.addEventListener("click", function() {
            showScene(null); // Show all scenes
        });
        mapButton.addEventListener("click", function() {
            showScene("scene2");
        });
        topStatesButton.addEventListener("click", function() {
            showScene("scene3");
        });
        priceReviewsButton.addEventListener("click", function() {
            showScene("scene4");
        });
        roomTypeButton.addEventListener("click", function() {
            showScene("scene5");
        });
        annualPerformanceButton.addEventListener("click", function() {
            showScene("scene6");
        });
        priceDistributionButton.addEventListener("click", function() {
            showScene("scene7");
        });

        // Function to show a specific scene
        function showScene(sceneId) {
            scenes.forEach(function(scene) {
                const sceneElement = document.getElementById(scene);
                sceneElement.style.display = (sceneId === null || sceneId === scene) ? "block" : "none";
            });
        }

        // Function to adjust margin of content div
        window.addEventListener('resize', adjustContentMargin);

        function adjustContentMargin() {
            const navHeight = document.getElementById('navigation').offsetHeight;
            document.getElementById('content').style.marginTop = `${navHeight}px`;
        }
        window.onload = function() {
               adjustContentMargin(); // Call the function initially to set the correct margin
               showScene(null); // Show all scenes initially
        }
    </script>
</body>
</html>
